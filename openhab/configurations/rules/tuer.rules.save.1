import org.openhab.script.actions.*

/* Regeln, die bisher nur Notifications an das Smartphone senden und
 * ein bisschen dynamisch die Sitemap ändern.
 *
 * Um die Notifications zu erhalten, muss man das Addon my.openhab
 * installieren und da auch einen Account haben und die entsprechende
 * Email hier eintragen. Anschließend nur noch Benutzername und PW und
 * https://my.openhab.org als Remote URL in der App setzen.
 * Die App funktioniert dann auch ortsunabhängig, egal ob WLAN oder Mobilfunk.
 */

rule klingeln
when
        Item taster changed from OFF to ON
then
        sendBroadcastNotification("SUPERGEIL")
        sendCommand(camSwitch, ON)
	sendCommand(LED2,ON)
end

rule klingel2
when 
	Item taster changed from ON to OFF
then
	sendCommand(LED2,OFF)
	sendBroadcastNotification("GEIL")
end

rule tuerOeffnen
when
        Item tuerSwitch received command ON
then
        sendBroadcastNotification("Tür geöffnet")
        sendCommand(raspiLED, ON)	//Tür öffnen
end

rule tuerSchliessen
when
        Item tuerSwitch received command OFF
then
        sendBroadcastNotification("Tür geschlossen")
        sendCommand(raspiLED, OFF)	//Tür schließen?
end

rule streamStarten
when
        Item camSwitch received command ON
then
        sendBroadcastNotification("Stream gestartet")
        //Stream Starten
end

rule streamBeenden
when
        Item camSwitch received command OFF
then
        sendBroadcastNotification("Stream beendet")
        //Stream beenden
end

rule microAn
when
        Item microSwitch received command ON
then
        sendBroadcastNotification("Micro an")
        //Micro anschalten
end

rule microAus
when
        Item microSwitch received command OFF
then
        sendBroadcastNotification("Micro aus")
        //Micro ausschalten
end

rule testAn
when
	Item testSwitch received command ON
then
	say("Hallo Welt")
end

rule testAus
when
	Item testSwitch received command OFF
then
	say("Bye Welt")
end
